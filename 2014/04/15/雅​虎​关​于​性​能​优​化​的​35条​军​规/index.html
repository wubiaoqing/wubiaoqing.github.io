
 <!DOCTYPE HTML>
<html >
<head>
  <meta charset="UTF-8">
  
    <title>​雅​虎​关​于​性​能​优​化​的​35条​军​规 | 无表情</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="无表情">
    
    <meta name="description" content="1、尽量减少HTTP请求个数——须权衡
合并图片（如css sprites，内置图片使用数据）、合并CSS、JS，这一点很重要，但是要考虑合并后的文件体积。 
2、使用CDN（内容分发网络）
这里可以关注CDN的三类实现：镜像、高速缓存、专线，以及智能路由器和负载均衡；
3、为文件头指定Expire">
    
    
    
    
    <link rel="alternate" href="/" title="无表情" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/pacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/pacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.svg" alt="无表情" title="无表情"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="无表情">无表情</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
					<li>
					
					<form class="search" action="" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:wubiaoqing.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/04/15/雅​虎​关​于​性​能​优​化​的​35条​军​规/" title="​雅​虎​关​于​性​能​优​化​的​35条​军​规" itemprop="url">​雅​虎​关​于​性​能​优​化​的​35条​军​规</a>
  </h1>
  <p class="article-author">By
    
      <a href="http://wubiaoqing.github.io" title="无表情">无表情</a>
    </p>
  <p class="article-time">
    <time datetime="2014-04-15T13:08:07.000Z" itemprop="datePublished">Apr 15 2014</time>
    Updated:<time datetime="2014-09-11T15:13:11.000Z" itemprop="dateModified">Sep 11 2014</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">Contents</strong>
		
		</div>
		
		<p>1<span style="font-family: 宋体;">、尽量减少</span><span style="font-family: Arial;">HTTP</span><span style="font-family: 宋体;">请求个数</span><span style="font-family: Arial;">——</span><span style="font-family: 宋体;">须权衡</span></p>
<p>合并图片（如<span style="font-family: Arial;">css sprites</span><span style="font-family: 宋体;">，内置图片使用数据）、合并</span><span style="font-family: Arial;">CSS</span><span style="font-family: 宋体;">、</span><span style="font-family: Arial;">JS</span><span style="font-family: 宋体;">，这一点很重要，但是要考虑合并后的文件体积。 </span></p>
<p>2<span style="font-family: 宋体;">、使用</span><span style="font-family: Arial;">CDN</span><span style="font-family: 宋体;">（内容分发网络）</span></p>
<p>这里可以关注<span style="font-family: Arial;">CDN</span><span style="font-family: 宋体;">的三类实现：镜像、高速缓存、专线，以及智能路由器和负载均衡；</span></p>
<p>3<span style="font-family: 宋体;">、为文件头指定</span><span style="font-family: Arial;">Expires</span><span style="font-family: 宋体;">或</span><span style="font-family: Arial;">Cache-Control</span><span style="font-family: 宋体;">，使内容具有缓存性。</span></p>
<p>区分静态内容和动态内容，避免以后页面访问中不必要的<span style="font-family: Arial;">HTTP</span><span style="font-family: 宋体;">请求。</span></p>
<p>4<span style="font-family: 宋体;">、避免空的</span><span style="font-family: Arial;">src</span><span style="font-family: 宋体;">和</span><span style="font-family: Arial;">href</span></p>
<p>留意具有这两个属性的标签如<span style="font-family: Arial;">link</span><span style="font-family: 宋体;">，</span><span style="font-family: Arial;">script</span><span style="font-family: 宋体;">，</span><span style="font-family: Arial;">img</span><span style="font-family: 宋体;">，</span><span style="font-family: Arial;">iframe</span><span style="font-family: 宋体;">等；</span></p>
<p>5<span style="font-family: 宋体;">、使用</span><span style="font-family: Arial;">gzip</span><span style="font-family: 宋体;">压缩内容</span></p>
<p>Gzip<span style="font-family: 宋体;">压缩所有可能的文件类型以来减少文件体积</span></p>
<p>6<span style="font-family: 宋体;">、把</span><span style="font-family: Arial;">CSS</span><span style="font-family: 宋体;">放到顶部</span></p>
<p>实现页面有秩序地加载，这对于拥有较多内容的页面和网速较慢的用户来说更为重要，同时，<span style="font-family: Arial;">HTML</span><span style="font-family: 宋体;">规范清楚指出样式表要放包含在页面的</span><span style="font-family: Arial;">&lt;head /&gt;</span><span style="font-family: 宋体;">区域内；</span></p>
<p>7<span style="font-family: 宋体;">、把</span><span style="font-family: Arial;">JS</span><span style="font-family: 宋体;">放到底部</span></p>
<p>HTTP/1.1 <span style="font-family: 宋体;">规范建议，浏览器每个主机名的并行下载内容不超过两个，而问题在于脚本阻止了页面的平行下载，即便是主机名不相同</span></p>
<p>8<span style="font-family: 宋体;">、避免使用</span><span style="font-family: Arial;">CSS</span><span style="font-family: 宋体;">表达式</span></p>
<p>页面显示和缩放，滚动、乃至移动鼠标时，<span style="font-family: Arial;">CSS</span><span style="font-family: 宋体;">表达式的计算频率是我们要关注的。可以考虑一次性的表达式或者使用事件句柄来代替</span><span style="font-family: Arial;">CSS</span><span style="font-family: 宋体;">表达式。</span></p>
<p>9<span style="font-family: 宋体;">、将</span><span style="font-family: Arial;">CSS</span><span style="font-family: 宋体;">和</span><span style="font-family: Arial;">JS</span><span style="font-family: 宋体;">放到外部文件中</span></p>
<p>我们需要权衡内置代码带来的<span style="font-family: Arial;">HTTP</span><span style="font-family: 宋体;">请求减少与通过使用外部文件进行缓存带来的好处的折中点。</span></p>
<p>10<span style="font-family: 宋体;">、减少</span><span style="font-family: Arial;">DNS</span><span style="font-family: 宋体;">查找次数</span></p>
<p>我们需要权衡减少 <span style="font-family: Arial;">DNS</span><span style="font-family: 宋体;">查找次数和保持较高程度并行下载两者之间的关系。</span></p>
<p>11<span style="font-family: 宋体;">、精简</span><span style="font-family: Arial;">CSS</span><span style="font-family: 宋体;">和</span><span style="font-family: Arial;">JS</span></p>
<p>目的就是减少下载的文件体积，可考虑压缩工具<span style="font-family: Arial;">JSMin</span><span style="font-family: 宋体;">和</span><span style="font-family: Arial;">YUI Compressor</span><span style="font-family: 宋体;">。</span></p>
<p>12<span style="font-family: 宋体;">、避免跳转</span></p>
<p>为了确保<span style="font-family: Arial;">“</span><span style="font-family: 宋体;">后退</span><span style="font-family: Arial;">”</span><span style="font-family: 宋体;">按钮可以正确地使用，使用标准的 </span><span style="font-family: Arial;">3XXHTTP</span><span style="font-family: 宋体;">状态代码；同域中注意避免反斜杠 </span><span style="font-family: Arial;">“/” </span><span style="font-family: 宋体;">的跳转；</span><br>跨域使用 <span style="font-family: Arial;">Alias</span><span style="font-family: 宋体;">或者 </span><span style="font-family: Arial;">mod_rewirte</span><span style="font-family: 宋体;">建立 </span><span style="font-family: Arial;">CNAME</span><span style="font-family: 宋体;">（保存一个域名和另外一个域名之间关系的</span><span style="font-family: Arial;">DNS</span><span style="font-family: 宋体;">记录）</span></p>
<p>13<span style="font-family: 宋体;">、剔除重复的</span><span style="font-family: Arial;">JS</span><span style="font-family: 宋体;">和</span><span style="font-family: Arial;">CSS</span></p>
<p>重复调用脚本，除了增加额外的<span style="font-family: Arial;">HTTP</span><span style="font-family: 宋体;">请求外，多次运算也会浪费时间。在</span><span style="font-family: Arial;">IE</span><span style="font-family: 宋体;">和</span><span style="font-family: Arial;">Firefox</span><span style="font-family: 宋体;">中不管脚本是否可缓存，它们都存在重复运算</span><span style="font-family: Arial;">JavaScript</span><span style="font-family: 宋体;">的问题。</span></p>
<p>14<span style="font-family: 宋体;">、配置</span><span style="font-family: Arial;">ETags</span></p>
<p>Entity tags<span style="font-family: 宋体;">（</span><span style="font-family: Arial;">ETags</span><span style="font-family: 宋体;">）（实体标签）是</span><span style="font-family: Arial;">web</span><span style="font-family: 宋体;">服务器和浏览器用于判断浏览器缓存中的内容和服务器中的原始内容是否匹配的一种机制（</span><span style="font-family: Arial;">“</span><span style="font-family: 宋体;">实体</span><span style="font-family: Arial;">”</span><span style="font-family: 宋体;">就是所说的</span><span style="font-family: Arial;">“</span><span style="font-family: 宋体;">内 容</span><span style="font-family: Arial;">”</span><span style="font-family: 宋体;">，包括图片、脚本、样式表等），是比</span><span style="font-family: Arial;">last-modified date</span><span style="font-family: 宋体;">更更加灵活的机制，单位时间内文件被修过多次，</span><span style="font-family: Arial;">Etag</span><span style="font-family: 宋体;">可以综合</span><span style="font-family: Arial;">Inode(</span><span style="font-family: 宋体;">文件的索引节点</span><span style="font-family: Arial;">(inode)</span><span style="font-family: 宋体;">数</span><span style="font-family: Arial;">)</span><span style="font-family: 宋体;">，</span><span style="font-family: Arial;">MTime(</span><span style="font-family: 宋体;">修改时间</span><span style="font-family: Arial;">)</span><span style="font-family: 宋体;">和</span><span style="font-family: Arial;">Size</span><span style="font-family: 宋体;">来精准的进行判断，避开</span><span style="font-family: Arial;">UNIX</span><span style="font-family: 宋体;">记录</span><span style="font-family: Arial;">MTime</span><span style="font-family: 宋体;">只能精确到秒的问题。 服务器集群使用，可取后两个参数。使用</span><span style="font-family: Arial;">ETags</span><span style="font-family: 宋体;">减少</span><span style="font-family: Arial;">Web</span><span style="font-family: 宋体;">应用带宽和负载。</span></p>
<p>15<span style="font-family: 宋体;">、使</span><span style="font-family: Arial;">AJAX</span><span style="font-family: 宋体;">可缓存</span></p>
<p>利用时间戳，更精巧的实现响应可缓存与服务器数据同步更新。</p>
<p>16<span style="font-family: 宋体;">、尽早刷新输出缓冲</span></p>
<p>尤其对于<span style="font-family: Arial;">css</span><span style="font-family: 宋体;">，</span><span style="font-family: Arial;">js</span><span style="font-family: 宋体;">文件的并行下载更有意义</span></p>
<p>17<span style="font-family: 宋体;">、使用</span><span style="font-family: Arial;">GET</span><span style="font-family: 宋体;">来完成</span><span style="font-family: Arial;">AJAX</span><span style="font-family: 宋体;">请求</span></p>
<p>当使用<span style="font-family: Arial;">XMLHttpRequest</span><span style="font-family: 宋体;">时，浏览器中的</span><span style="font-family: Arial;">POST</span><span style="font-family: 宋体;">方法是一个</span><span style="font-family: Arial;">“</span><span style="font-family: 宋体;">两步走</span><span style="font-family: Arial;">”</span><span style="font-family: 宋体;">的过程：首先发送文件头，然后才发送数据。在</span><span style="font-family: Arial;">url</span><span style="font-family: 宋体;">小于</span><span style="font-family: Arial;">2K</span><span style="font-family: 宋体;">时使用</span><span style="font-family: Arial;">GET</span><span style="font-family: 宋体;">获取数据时更加有意义。</span></p>
<p>18<span style="font-family: 宋体;">、延迟加载</span></p>
<p>确定页面运行正常后，再加载脚本来实现如拖放和动画，或者是隐藏部分的内容以及折叠内容等。</p>
<p>19<span style="font-family: 宋体;">、预加载</span></p>
<p>关注下无条件加载，有条件加载和有预期的加载。</p>
<p>20<span style="font-family: 宋体;">、减少</span><span style="font-family: Arial;">DOM</span><span style="font-family: 宋体;">元素个数</span></p>
<p>使用更适合或者在语意是更贴切的标签，要考虑大量<span style="font-family: Arial;">DOM</span><span style="font-family: 宋体;">元素中循环的性能开销。</span></p>
<p>21<span style="font-family: 宋体;">、根据域名划分页面内容</span></p>
<p>很显然， 是最大限度地实现平行下载</p>
<p>22<span style="font-family: 宋体;">、尽量减少</span><span style="font-family: Arial;">iframe</span><span style="font-family: 宋体;">的个数</span></p>
<p>考虑即使内容为空，加载也需要时间，会阻止页面加载，没有语意，注意<span style="font-family: Arial;">iframe</span><span style="font-family: 宋体;">相对于其他</span><span style="font-family: Arial;">DOM</span><span style="font-family: 宋体;">元素高出</span><span style="font-family: Arial;">1-2</span><span style="font-family: 宋体;">个数量级的开销，它会在典型方式下阻塞</span><span style="font-family: Arial;">onload</span><span style="font-family: 宋体;">事件，</span><span style="font-family: Arial;">IE</span><span style="font-family: 宋体;">和</span><span style="font-family: Arial;">Firefox</span><span style="font-family: 宋体;">中主页面样式表会阻塞它的下载。</span></p>
<p>23<span style="font-family: 宋体;">、避免</span><span style="font-family: Arial;">404</span></p>
<p>HTTP<span style="font-family: 宋体;">请求时间消耗是很大的，有些站点把</span><span style="font-family: Arial;">404</span><span style="font-family: 宋体;">错误响应页面改为</span><span style="font-family: Arial;">“</span><span style="font-family: 宋体;">你是不是要找</span><span style="font-family: Arial;"><em>*</em>”</span><span style="font-family: 宋体;">，这虽然改进了用户体验但是同样也会浪费服务器资源（如数据库等）。最糟糕的情况是指向外部 </span><span style="font-family: Arial;">JavaScript</span><span style="font-family: 宋体;">的链接出现问题并返回</span><span style="font-family: Arial;">404</span><span style="font-family: 宋体;">代码。首先，这种加载会破坏并行加载；其次浏览器会把试图在返回的</span><span style="font-family: Arial;">404</span><span style="font-family: 宋体;">响应内容中找到可能有用的部分当作</span><span style="font-family: Arial;">JavaScript</span><span style="font-family: 宋体;">代码来执行。</span></p>
<p>24<span style="font-family: 宋体;">、减少</span><span style="font-family: Arial;">Cookie</span><span style="font-family: 宋体;">的大小</span></p>
<p>去除不必要的<span style="font-family: Arial;">coockie</span><br>使<span style="font-family: Arial;">coockie</span><span style="font-family: 宋体;">体积尽量小以减少对用户响应的影响</span><br>注意在适应级别的域名上设置<span style="font-family: Arial;">coockie</span><span style="font-family: 宋体;">以便使子域名不受影响</span><br>设置合理的过期时间。较早地<span style="font-family: Arial;">Expire</span><span style="font-family: 宋体;">时间和不要过早去清除</span><span style="font-family: Arial;">coockie</span><span style="font-family: 宋体;">，都会改善用户的响应时间。</span></p>
<p>25<span style="font-family: 宋体;">、使用无</span><span style="font-family: Arial;">cookie</span><span style="font-family: 宋体;">的域</span></p>
<p>确定对于静态内容的请求是无<span style="font-family: Arial;">coockie</span><span style="font-family: 宋体;">的请求。创建一个子域名并用他来存放所有静态内容。</span></p>
<p>26<span style="font-family: 宋体;">、减少</span><span style="font-family: Arial;">DOM</span><span style="font-family: 宋体;">访问</span></p>
<p>缓存已经访问过的有关元素<br>线下更新完节点之后再将它们添加到文档树中<br>避免使用<span style="font-family: Arial;">JavaScript</span><span style="font-family: 宋体;">来修改页面布局 </span></p>
<p>27<span style="font-family: 宋体;">、开发智能事件处理程序</span></p>
<p>有时候我们会感觉到页面反应迟钝，这是因为<span style="font-family: Arial;">DOM</span><span style="font-family: 宋体;">树元素中附加了过多的事件句柄并且些事件句病被频繁地触发。这就是为什么说使用</span><span style="font-family: Arial;">event delegation</span><span style="font-family: 宋体;">（事件代理）是一种好方法了。如果你在一个</span><span style="font-family: Arial;">div</span><span style="font-family: 宋体;">中有</span><span style="font-family: Arial;">10</span><span style="font-family: 宋体;">个按钮，你只需要在</span><span style="font-family: Arial;">div</span><span style="font-family: 宋体;">上附加一次事件句柄就可以了，而不用去为每一个按 钮增加一个句柄。事件冒泡时你可以捕捉到事件并判断出是哪个事件发出的。</span><br>你同样也不用为了操作<span style="font-family: Arial;">DOM</span><span style="font-family: 宋体;">树而等待</span><span style="font-family: Arial;">onload</span><span style="font-family: 宋体;">事件的发生。你需要做的就是等待树结构中你要访问的元素出现。你也不用等待所有图像都加载完毕。</span><br>你可能会希望用<span style="font-family: Arial;">DOMContentLoaded</span><span style="font-family: 宋体;">事件来代替 事件应用程序中的</span><span style="font-family: Arial;">onAvailable</span><span style="font-family: 宋体;">方法。</span></p>
<p>28<span style="font-family: 宋体;">、用</span><span style="font-family: Arial;">&lt;link&gt;</span><span style="font-family: 宋体;">代替</span><span style="font-family: Arial;">@import</span></p>
<p>在<span style="font-family: Arial;">IE</span><span style="font-family: 宋体;">中，页面底部</span><span style="font-family: Arial;">@import</span><span style="font-family: 宋体;">和使用</span><span style="font-family: Arial;">&lt;link&gt;</span><span style="font-family: 宋体;">作用是一样的，因此最好不要使用它。</span></p>
<p>29<span style="font-family: 宋体;">、避免使用滤镜</span></p>
<p>完全避免使用<span style="font-family: Arial;">AlphaImageLoader</span><span style="font-family: 宋体;">的最好方法就是使用</span><span style="font-family: Arial;">PNG8</span><span style="font-family: 宋体;">格式来代替，这种格式能在</span><span style="font-family: Arial;">IE</span><span style="font-family: 宋体;">中很好地工作。如果你确实需要使用 </span><span style="font-family: Arial;">AlphaImageLoader</span><span style="font-family: 宋体;">，请使用下划线</span><span style="font-family: Arial;">_filter</span><span style="font-family: 宋体;">又使之对</span><span style="font-family: Arial;">IE7</span><span style="font-family: 宋体;">以上版本的用户无效。</span></p>
<p>30<span style="font-family: 宋体;">、优化图像</span></p>
<p>尝试把<span style="font-family: Arial;">GIF</span><span style="font-family: 宋体;">格式转换成</span><span style="font-family: Arial;">PNG</span><span style="font-family: 宋体;">格式，看看是否节省空间。在所有的</span><span style="font-family: Arial;">PNG</span><span style="font-family: 宋体;">图片上运行</span><span style="font-family: Arial;">pngcrush</span><span style="font-family: 宋体;">（或者其它</span><span style="font-family: Arial;">PNG</span><span style="font-family: 宋体;">优化工具）</span></p>
<p>31<span style="font-family: 宋体;">、优化</span><span style="font-family: Arial;">CSS Spirite</span></p>
<p>在<span style="font-family: Arial;">Spirite</span><span style="font-family: 宋体;">中水平排列你的图片，垂直排列会稍稍增加文件大小；</span><br>Spirite<span style="font-family: 宋体;">中把颜色较近的组合在一起可以降低颜色数，理想状况是低于</span><span style="font-family: Arial;">256</span><span style="font-family: 宋体;">色以便适用</span><span style="font-family: Arial;">PNG8</span><span style="font-family: 宋体;">格式；</span><br>便于移动，不要在<span style="font-family: Arial;">Spirite</span><span style="font-family: 宋体;">的图像中间留有较大空隙。这虽然不大会增加文件大小但对于用户代理来说它需要更少的内存来把图片解压为像素地图。 </span><span style="font-family: Arial;">100×100</span><span style="font-family: 宋体;">的图片为</span><span style="font-family: Arial;">1</span><span style="font-family: 宋体;">万像素，而</span><span style="font-family: Arial;">1000×1000</span><span style="font-family: 宋体;">就是</span><span style="font-family: Arial;">100</span><span style="font-family: 宋体;">万像素。</span></p>
<p>32<span style="font-family: 宋体;">、不要在</span><span style="font-family: Arial;">HTML</span><span style="font-family: 宋体;">中缩放图像</span><span style="font-family: Arial;">——</span><span style="font-family: 宋体;">须权衡</span></p>
<p>不要为了在<span style="font-family: Arial;">HTML</span><span style="font-family: 宋体;">中设置长宽而使用比实际需要大的图片。如果你需要：</span></p>
<p>&lt;img width=”100″ height=”100″ src=”mycat.jpg” alt=”My Cat” /&gt;</p>
<p>那么你的图片（<span style="font-family: Arial;">mycat.jpg</span><span style="font-family: 宋体;">）就应该是</span><span style="font-family: Arial;">100×100</span><span style="font-family: 宋体;">像素而不是把一个</span><span style="font-family: Arial;">500×500</span><span style="font-family: 宋体;">像素的图片缩小使用。这里在下文有更有趣的分析。</span></p>
<p>33<span style="font-family: 宋体;">、</span><span style="font-family: Arial;">favicon.ico</span><span style="font-family: 宋体;">要小而且可缓存</span></p>
<p>favicon.ico<span style="font-family: 宋体;">是位于服务器根目录下的一个图片文件。它是必定存在的，因为即使你不关心它是否有用，浏览器也会对它发出请求，因此最好不要返回一 个</span><span style="font-family: Arial;">404 Not Found</span><span style="font-family: 宋体;">的响应。由于是在同一台服务器上，它每被请求一次</span><span style="font-family: Arial;">coockie</span><span style="font-family: 宋体;">就会被发送一次。这个图片文件还会影响下载顺序，例如在</span><span style="font-family: Arial;">IE</span><span style="font-family: 宋体;">中当你在 </span><span style="font-family: Arial;">onload</span><span style="font-family: 宋体;">中请求额外的文件时，</span><span style="font-family: Arial;">favicon</span><span style="font-family: 宋体;">会在这些额外内容被加载前下载。</span></p>
<p>因此，为了减少<span style="font-family: Arial;">favicon.ico</span><span style="font-family: 宋体;">带来的弊端，要做到：</span><br>文件尽量地小，最好小于<span style="font-family: Arial;">1K</span><br>在适当的时候（也就是你不要打算再换<span style="font-family: Arial;">favicon.ico</span><span style="font-family: 宋体;">的时候，因为更换新文件时不能对它进行重命名）为它设置</span><span style="font-family: Arial;">Expires</span><span style="font-family: 宋体;">文件头。你可以很安全地 把</span><span style="font-family: Arial;">Expires</span><span style="font-family: 宋体;">文件头设置为未来的几个月。你可以通过核对当前</span><span style="font-family: Arial;">favicon.ico</span><span style="font-family: 宋体;">的上次编辑时间来作出判断。</span><br>Imagemagick<span style="font-family: 宋体;">可以帮你创建小巧的</span><span style="font-family: Arial;">favicon</span><span style="font-family: 宋体;">。</span></p>
<p>34<span style="font-family: 宋体;">、保持单个内容小于</span><span style="font-family: Arial;">25K</span></p>
<p>因为<span style="font-family: Arial;">iPhone</span><span style="font-family: 宋体;">不能缓存大于</span><span style="font-family: Arial;">25K</span><span style="font-family: 宋体;">的文件。注意这里指的是解压缩后的大小。由于单纯</span><span style="font-family: Arial;">gizp</span><span style="font-family: 宋体;">压缩可能达不要求，因此精简文件就显得十分重 要。</span></p>
<p>35<span style="font-family: 宋体;">、打包组件成复合文本</span></p>
<p>页面内容打包成复合文本就如同带有多附件的<span style="font-family: Arial;">Email</span><span style="font-family: 宋体;">，它能够使你在一个</span><span style="font-family: Arial;">HTTP</span><span style="font-family: 宋体;">请求中取得多个组件（切记：</span><span style="font-family: Arial;">HTTP</span><span style="font-family: 宋体;">请求是很奢侈的）。当你使用这条规 则时，首先要确定用户代理是否支持（</span><span style="font-family: Arial;">iPhone</span><span style="font-family: 宋体;">就不支持）。</span></p>
  
	</div>
		<footer class="article-footer clearfix">


<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/前端相关/">前端相关</a>
</div>



<div class="article-share" id="share">

  <div data-url="http://wubiaoqing.github.io/2014/04/15/雅​虎​关​于​性​能​优​化​的​35条​军​规/" data-title="​雅​虎​关​于​性​能​优​化​的​35条​军​规 | 无表情" data-tsina="null" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2014/09/10/cssSprites/" title="网站性能优化之css sprites">
  <strong>PREVIOUS:</strong><br/>
  <span>
  网站性能优化之css sprites</span>
</a>
</div>


<div class="next">
<a href="/2014/03/15/3.15到4.3学习笔记/"  title="3.15到4.3学习笔记">
 <strong>NEXT:</strong><br/> 
 <span>3.15到4.3学习笔记
</span>
</a>
</div>

</nav>

	
</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
  
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
			<li><a href="/categories/CSS/" title="CSS">CSS<sup>1</sup></a></li>
		
			<li><a href="/categories/javascript/" title="javascript">javascript<sup>1</sup></a></li>
		
			<li><a href="/categories/前端相关/" title="前端相关">前端相关<sup>2</sup></a></li>
		
			<li><a href="/categories/学习/" title="学习">学习<sup>1</sup></a></li>
		
			<li><a href="/categories/随感/" title="随感">随感<sup>0</sup></a></li>
		
			<li><a href="/categories/随笔/" title="随笔">随笔<sup>4</sup></a></li>
		
			<li><a href="/categories/骑行人生/" title="骑行人生">骑行人生<sup>2</sup></a></li>
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			<li><a href="/tags/CSS/" title="CSS">CSS<sup>1</sup></a></li>
		
			<li><a href="/tags/css-sprites/" title="css sprites">css sprites<sup>1</sup></a></li>
		
			<li><a href="/tags/javascript/" title="javascript">javascript<sup>1</sup></a></li>
		
			<li><a href="/tags/photos/" title="photos">photos<sup>1</sup></a></li>
		
			<li><a href="/tags/随感-钻研精神/" title="随感 钻研精神">随感 钻研精神<sup>1</sup></a></li>
		
			<li><a href="/tags/骑行人生/" title="骑行人生">骑行人生<sup>1</sup></a></li>
		
		</ul>
</div>


  <div class="rsspart">
	<a href="/" target="_blank" title="rss">RSS</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<div class="social-font" class="clearfix">
		
		
		
		
	</div>
		<p class="copyright">Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2014 
		
		<a href="http://wubiaoqing.github.io" target="_blank" title="无表情">无表情</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>






  </body>
</html>
